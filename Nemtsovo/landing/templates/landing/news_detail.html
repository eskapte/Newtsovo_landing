{% extends 'landing/base.html' %}
{% load static %}

{% block title %}
  {{ event.title }}
{% endblock %}

{% block content %}
  <main class="block-after-header">
    <section class="news-detail">
      <div class="news-detail__container container">
        <h2 class="news-detail__title small-title">{{ news.title }}</h2>
        <i class="news-detail__date-time">{{ news.date|date:"DATE_FORMAT" }}</i>
        <p class="news-detail__description">
          {{ news.description }}
        </p>
        {% if news.media.exists %}
          <div class="gallery news-detail__gallery">
            {% for media in news.media.all %}
              <a class="gallery__item"
                 data-fancybox="{{ news.get_unique_name }}"
                 data-src="{{ media.file.url }}"
                 {% if media.is_video %}data-thumb="{% static 'landing/img/video-stub.png' %}"{% endif %}
              >
                {% if media.is_video %}
                  <video src="{{ media.file.url }}"></video>
                {% else %}
                  <img src="{{ media.get_miniature_or_original }}"
                       loading="lazy" alt="Фото или видео с мероприятия">
                {% endif %}
              </a>
            {% endfor %}
          </div>
        {% endif %}
        <a href="{% url 'news' %}" class="booking-btn">Все новости</a>
      </div>
    </section>
  </main>
{% endblock %}

{% block javascript %}
  <script src="{% static 'landing/js/init-fancybox.js' %}"></script>
{% endblock %}